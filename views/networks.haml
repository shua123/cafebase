%script{:src => "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js", :type => "text/javascript"}
%script{:src => "/js/lib/bootstrap-2.0.2.js", :type => "text/javascript"}
%script{:src => "http://code.highcharts.com/highcharts.js"}
%script{:src => "http://code.highcharts.com/modules/exporting.js"}
#container{:style => "min-width: 400px; height: 400px; margin: 0 auto"}
    :javascript 
      
    $(function() {
          var chart;
          $(document).ready(function() {
              chart = new Highcharts.Chart({
      
                  chart: {
                      renderTo: 'container',
                      type: 'column'
                  },
      
                  title: {
                      text: 'Elementary School Space Utilization by Network'
                  },
      
                  xAxis: {
                      categories: ['Austin-North Lawndale', 'Burnham Park', 'Englewood-Gresham', 'Fullerton', 'Fulton', 'Garfield-Humboldt', 'Lake Calumet', 'Midway', 'OHare', 'Pershing', 'Pilsen-Little Village', 'Ravenswood-Ridge', 'Rock Island', 'Skyway'],
                      labels: {
                          rotation: -45,
                          align: 'right'
                      }
                  },
      
                  yAxis: {
                      allowDecimals: false,
                      min: 0,
                      title: {
                          text: 'Percent of schools'
                      }
                  },
      
                  tooltip: {
                      formatter: function() {
                          return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + this.y + ' (' + Math.round(this.percentage) + '%)' + '<br/>' + 'Total: ' + this.point.stackTotal;
                      }
                  },
      
                  plotOptions: {
                      column: {
                          stacking: 'percent'
                      }
                  },
      
                  series: [{
                      name: 'Overcrowded (CPS 30)',
                      data: [1, 0, 0, 7, 2, 1, 3, 17, 17, 8, 4, 4, 0, 2],
                      stack: 'CPS',
                      color: '#F01616',
                      
                      },
                  {
                      name: 'Efficient (CPS 30)',
                      data: [8, 9, 2, 20, 8, 4, 8, 15, 20, 15, 14, 25, 11, 10],
                      stack: 'CPS',
                      color: '#36C429'},
                  {
                      name: 'Underutilized (CPS 30)',
                      data: [26, 26, 32, 12, 18, 26, 16, 7, 1, 10, 6, 11, 17, 27],
                      stack: 'CPS',
                      color: '#EFFA1B'},
                  {
                      name: 'Overcrowded (Avg 25.5)',
                      data: [3, 4, 0, 18, 4, 4, 5, 25, 27, 15, 7, 14, 6, 4],
                      stack: '25',
                      color: '#FC7272'},
                  {
                      name: 'Efficient (Avg 25.5)',
                      data: [9, 8, 6, 13, 9, 7, 7, 11, 11, 10, 12, 18, 7, 17],
                      stack: '25',
                      color: '#63E657'},
                  {
      
                      name: 'Underutilized (Avg 25.5)',
                      data: [23, 23, 28, 8, 15, 20, 15, 3, 0, 8, 5, 8, 15, 18],
                      stack: '25',
                      color: '#FAE71B'
      
                      }]
              });
          });
      
    });
